@using Atron.Application.DTO;
@using Shared.DTO;
@using Shared.Services;
@using Newtonsoft.Json;
@using Atron.WebViews.Models;
@model CargoModel;

<link href="~/css/site.css" />
<partial name="Partials/TitleLabel"></partial>
<partial name="Partials/BtnCadastrar"></partial>

<div class="panel panel-default">
	<form asp-controller="Cargo" asp-action="Index" asp-route-filter="@ViewData["Filter"]" method="post">
		<p>
			<input type="text" name="filter" />
			<input type="submit" value="Filtrar" />
		</p>
	</form>
	<fieldset>
		<legend class="fw-semibold">Cargos</legend>
		<table class="table table-striped">
			<thead>
				<tr>
					<th>@Html.DisplayNameFor(model => model.Cargo.Codigo)</th>
					<th>@Html.DisplayNameFor(model => model.Cargo.Descricao)</th>
					<th>Departamento</th>
				</tr>
			</thead>

			<tbody>
				@if (Model is not null)
				{
					@foreach (var item in Model.Cargos)
					{
						<tr>
							<td>@item.Codigo</td>
							<td>@item.Descricao</td>
							<td>@item.DepartamentoCodigo - @item.Departamento.Descricao</td>

							<td class="text-end">
								<partial name="Partials/BtnAtualizar" model="item.Codigo" />
								<partial name="Partials/BtnExcluir" model="item.Codigo" />
							</td>
						</tr>
					}
				}
			</tbody>
		</table>
	</fieldset>
	<partial name="PagerPartial" model="Model.PageInfo" />
</div>
<partial name="Partials/ExcluirRegistro" for="Cargo"></partial>